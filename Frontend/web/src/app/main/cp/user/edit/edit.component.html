<div class="content-cnt page-layout blank">
    <div class="header p-24 h-80" fxLayout="row" fxLayoutAlign="start center">
        <div fxFlex="50">
            <div fxLayout="row" fxLayoutAlign="start center">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon class="secondary-text s-18">home</mat-icon>
                    <mat-icon class="secondary-text s-16">chevron_right</mat-icon>
                    <span class="secondary-text">អ្នកប្រើប្រាស់</span>
                    <mat-icon class="secondary-text s-16">chevron_right</mat-icon>
                    <span class="secondary-text">កែប្រែ</span>
                </div>
            </div>
        </div>
    </div>

    <div class="content" >
        <div  class="tab-content p-24" >
            <div *ngIf = " isGettingData "> <!-- Display when isSearching = true -->
                <mat-spinner style="margin: auto" diameter=" 70 "></mat-spinner>
            </div>

            <ng-container *ngIf = " !isGettingData ">
                <form class="p-24" fxLayout="column" fxFlex="1 0 auto" name="form" [formGroup]="form" (submit)="submit()">

                    <div fxLayout="row">
                        <div fxFlex="20">
                            <div class="p-8 " >
                                <app-portrait 
                                    [mode] = " 'Edit' "
                                    [title]=" "
                                    [index]=" 1 " 
                                    [src]=" src " 
                                    (srcChange)='srcChange($event, 1)'>
                                </app-portrait> 
                            </div>
                        </div>
                        <div class="p-20" fxFlex="80">
                            <div fxLayout="row">
                                <mat-form-field appearance="outline" fxFlex="50" class="pr-8">
                                    <mat-label>ឈ្មោះ</mat-label>
                                    <input matInput formControlName="name" required >
                                    <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                                    <mat-error *ngIf="form.get('name').hasError('required')">
                                        Please enter Name.
                                    </mat-error>
                                </mat-form-field>
                            
                                <mat-form-field appearance="outline" fxFlex="50" class="pr-8">
                                    <mat-label>លេខទូរសព្ទ</mat-label>
                                    <input matInput formControlName="phone"required >
                                    <mat-icon matSuffix class="secondary-text">smartphone</mat-icon>
            
                                    <mat-error *ngIf="form.get('phone').hasError('required')">
                                        Please enter phone.
                                    </mat-error>
                                    <mat-error *ngIf="form.get('phone').hasError('pattern')">
                                        Please correct phone number eg. 096547215
                                    </mat-error>
            
                                </mat-form-field>
                            </div>
                          
                            <div fxLayout="row">
                                <mat-form-field appearance="outline" fxFlex="50" class="pr-8">
                                  <mat-label>អ៊ីមែល</mat-label>
                                  <input matInput formControlName="email" >
                                  <mat-icon matSuffix class="secondary-text">email</mat-icon>
                                  <mat-error *ngIf="form.get('email').hasError()">
                                      Please enter Email.
                                  </mat-error>
                                </mat-form-field>
            
                                <mat-form-field appearance="outline" fxFlex="50" class="pr-8" >
                                    <mat-label>តួរនាទី</mat-label>
                                    <mat-select formControlName = "type_id" >
                                      <mat-option *ngFor = " let row of types "  [value] = " row.id " > {{ row?.name }}</mat-option>
                                    </mat-select>
                                </mat-form-field>
                          
                            </div>

                            <div fxLayout="row">
                                <mat-label>ស្ថានភាព</mat-label>&nbsp;
                                <mat-slide-toggle [checked] = " isActive " (change)=" isActive = $event.source.checked " ></mat-slide-toggle>
                            </div>
                            
                        </div>
                    </div>
                  
                    <mat-divider></mat-divider>
                  
                    <div fxLayout="row" fxLayoutAlign="end center" class="pt-8">
                        <div *ngIf = " isUpdatingData ">
                            <mat-spinner style="margin: auto" diameter=" 50 " ></mat-spinner>
                        </div>
                        <div *ngIf = " !isUpdatingData ">
                            <button type = summit mat-raised-button color="accent">
                                <mat-icon class="material-icons">save</mat-icon>&nbsp;ធ្វើបច្ចុប្បន្នភាព
                            </button>
                            &nbsp;
                            <button type = button  mat-raised-button (click)="changePassword()" color="accent">
                                <mat-icon class="material-icons">vpn_key</mat-icon>&nbsp;ប្ដូរពាក្យសម្ងាត់
                            </button>
                        </div>
                      
                    </div>
                    
                </form>
            </ng-container>
            

        </div>

    </div>

</div>